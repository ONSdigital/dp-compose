services:
  zebedee:
    extends:
      file: ${PATH_MANIFESTS}/core-ons/zebedee.yml
      service: zebedee
    environment:
      ENABLE_JWT_SESSIONS:     "true"
      ENABLE_PERMISSIONS_AUTH: ${ENABLE_PERMISSIONS_AUTH:-1}
      IDENTITY_API_URL: http://host.docker.internal:25600
      ENABLE_STATIC_FILES_PUBLISHING: "false"
    depends_on:
      elasticsearch:
        condition: service_healthy
    extra_hosts:
      - "host.docker.internal:host-gateway"          # localhost mapping for linux
      - "docker.for.mac.host.internal:host-gateway"  # localhost mapping for mac (docker v17.12 to v18.02)